'\" t
.\"     Title: b10-auth
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.75.2 <http://docbook.sf.net/>
.\"      Date: February 5, 2013
.\"    Manual: BIND10
.\"    Source: BIND10
.\"  Language: English
.\"
.TH "B10\-AUTH" "8" "February 5, 2013" "BIND10" "BIND10"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
b10-auth \- Authoritative DNS server
.SH "SYNOPSIS"
.HP \w'\fBb10\-auth\fR\ 'u
\fBb10\-auth\fR [\fB\-v\fR]
.SH "DESCRIPTION"
.PP
The
\fBb10\-auth\fR
daemon provides the BIND 10 authoritative DNS server\&. Normally it is started by the
\fBb10-init\fR(8)
process\&.
.PP
This daemon communicates with other BIND 10 components over a
\fBb10-msgq\fR(8)
C\-Channel connection\&. If this connection is not established,
\fBb10\-auth\fR
will exit\&.
It receives its configurations from
\fBb10-cfgmgr\fR(8)\&.
.SH "OPTIONS"
.PP
The arguments are as follows:
.PP
\fB\-v\fR
.RS 4
Enable verbose logging mode\&. This enables logging of diagnostic messages at the maximum debug level\&.
.RE
.SH "CONFIGURATION AND COMMANDS"
.PP
The configurable settings are:
.PP

\fIdatabase_file\fR
defines the path to the SQLite3 zone file when using the sqlite datasource\&. The default is
/usr/local/var/bind10/zone\&.sqlite3\&.
.PP

\fIdatasources\fR
configures data sources\&. The list items include:
\fItype\fR
to define the required data source type (such as
\(lqmemory\(rq);
\fIclass\fR
to optionally select the class (it defaults to
\(lqIN\(rq); and
\fIzones\fR
to define the
\fIfile\fR
path name,
\fIorigin\fR
(default domain), and optional
\fIfiletype\fR\&. By default,
\fIzones\fR
is empty\&. For the in\-memory data source (i\&.e\&., the
\fItype\fR
is
\(lqmemory\(rq), the optional
\fIfiletype\fR
configuration item for
\fIzones\fR
can be specified so the in\-memory zone data can be built from another data source that is based on a database backend (in practice with current implementation, it would be an SQLite3 database file for the SQLite3 data source)\&. See the
BIND 10 Guide
for configuration details\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.sp
Only the IN class is supported at this time\&. By default, the memory data source is disabled\&. Also, currently the zone file must be canonical such as generated by \fBnamed\-compilezone \-D\fR\&.
.sp .5v
.RE
.PP

\fIlisten_on\fR
is a list of addresses and ports for
\fBb10\-auth\fR
to listen on\&. The list items are the
\fIaddress\fR
string and
\fIport\fR
number\&. By default,
\fBb10\-auth\fR
listens on port 53 on the IPv6 (::) and IPv4 (0\&.0\&.0\&.0) wildcard addresses\&.
.PP

\fItcp_recv_timeout\fR
is the timeout used on incoming TCP connections, in milliseconds\&. If the query is not sent within this time, the connection is closed\&. Setting this to 0 will disable TCP timeouts completely\&. The default is 5000 (five seconds)\&.
.PP
The configuration commands are:
.PP

\fBgetstats\fR
tells
\fBb10\-auth\fR
to report its defined statistics data in JSON format\&. It will not report about unused counters\&. This is used by the
\fBb10-stats\fR(8)
daemon\&. (The
\fBsendstats\fR
command is deprecated\&.)
.PP

\fBloadzone\fR
tells
\fBb10\-auth\fR
to load or reload a zone file\&. The arguments include:
\fIclass\fR
which optionally defines the class (it defaults to
\(lqIN\(rq);
\fIorigin\fR
is the domain name of the zone; and
\fIdatasrc\fR
optionally defines the type of datasource (it defaults to
\(lqmemory\(rq)\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.sp
In this development version, currently this only supports the IN class and the memory data source\&.
.sp .5v
.RE
.PP

\fBgetstats\fR
tells
\fBb10\-auth\fR
to send its statistics data\&.
.PP

\fBshutdown\fR
exits
\fBb10\-auth\fR\&. This has an optional
\fIpid\fR
argument to select the process ID to stop\&. (Note that the b10\-init process may restart this service if configured\&.)
.PP

\fBstart_ddns_forwarder\fR
starts (or restarts) the internal forwarding of DDNS Update messages\&. This is used by the
\fBb10-ddns\fR(8)
daemon to tell
\fBb10\-auth\fR
that DDNS Update messages can be forwarded\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.sp
This is not expected to be called by administrators; it will be removed as a public command in the future\&.
.sp .5v
.RE
.PP

\fBstop_ddns_forwarder\fR
stops the internal forwarding of DDNS Update messages\&. This is used by the
\fBb10-ddns\fR(8)
daemon to tell
\fBb10\-auth\fR
that DDNS Update messages should not be forwarded\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.sp
This is not expected to be called by administrators; it will be removed as a public command in the future\&.
.sp .5v
.RE
.SH "STATISTICS DATA"
.PP
The statistics data collected by the
\fBb10\-stats\fR
daemon for
\(lqAuth\(rq
include:
.PP
request\&.v4
.RS 4
Number of IPv4 requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.v6
.RS 4
Number of IPv6 requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.edns0
.RS 4
Number of requests with EDNS0 received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.badednsver
.RS 4
Number of requests with unsupported EDNS version received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.tsig
.RS 4
Number of requests with TSIG received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.sig0
.RS 4
Number of requests with SIG(0) received by the
\fBb10\-auth\fR
server; currently not implemented in BIND 10\&.
.RE
.PP
request\&.badsig
.RS 4
Number of requests with invalid TSIG or SIG(0) signature received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.udp
.RS 4
Number of UDP requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.tcp
.RS 4
Number of TCP requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
request\&.dnssec_ok
.RS 4
Number of requests with "DNSSEC OK" (DO) bit was set received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.query
.RS 4
Number of OpCode=Query requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.iquery
.RS 4
Number of OpCode=IQuery requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.status
.RS 4
Number of OpCode=Status requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.notify
.RS 4
Number of OpCode=Notify requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.update
.RS 4
Number of OpCode=Update requests received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
opcode\&.other
.RS 4
Number of requests in other OpCode received by the
\fBb10\-auth\fR
server\&.
.RE
.PP
responses
.RS 4
Number of responses sent by the
\fBb10\-auth\fR
server\&.
.RE
.PP
response\&.truncated
.RS 4
Number of truncated responses sent by the
\fBb10\-auth\fR
server\&.
.RE
.PP
response\&.edns0
.RS 4
Number of responses with EDNS0 sent by the
\fBb10\-auth\fR
server\&.
.RE
.PP
response\&.tsig
.RS 4
Number of responses with TSIG sent by the
\fBb10\-auth\fR
server\&.
.RE
.PP
response\&.sig0
.RS 4
Number of responses with SIG(0) sent by the
\fBb10\-auth\fR
server; currently not implemented in BIND 10\&.
.RE
.PP
qrysuccess
.RS 4
Number of queries received by the
\fBb10\-auth\fR
server resulted in rcode = NoError and the number of answer RR >= 1\&.
.RE
.PP
qryauthans
.RS 4
Number of queries received by the
\fBb10\-auth\fR
server resulted in authoritative answer\&.
.RE
.PP
qrynoauthans
.RS 4
Number of queries received by the
\fBb10\-auth\fR
server resulted in non\-authoritative answer\&.
.RE
.PP
qryreferral
.RS 4
Number of queries received by the
\fBb10\-auth\fR
server resulted in referral answer\&.
.RE
.PP
qrynxrrset
.RS 4
Number of queries received by the
\fBb10\-auth\fR
server resulted in NoError and AA bit is set in the response, but the number of answer RR == 0\&.
.RE
.PP
authqryrej
.RS 4
Number of authoritative queries rejected by the
\fBb10\-auth\fR
server\&.
.RE
.PP
rcode\&.noerror
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 0 (NoError)\&.
.RE
.PP
rcode\&.formerr
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 1 (FormErr)\&.
.RE
.PP
rcode\&.servfail
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 2 (ServFail)\&.
.RE
.PP
rcode\&.nxdomain
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 3 (NXDomain)\&.
.RE
.PP
rcode\&.notimp
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 4 (NotImp)\&.
.RE
.PP
rcode\&.refused
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 5 (Refused)\&.
.RE
.PP
rcode\&.yxdomain
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 6 (YXDomain)\&.
.RE
.PP
rcode\&.yxrrset
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 7 (YXRRSet)\&.
.RE
.PP
rcode\&.nxrrset
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 8 (NXRRSet)\&.
.RE
.PP
rcode\&.notauth
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 9 (NotAuth)\&.
.RE
.PP
rcode\&.notzone
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 10 (NotZone)\&.
.RE
.PP
rcode\&.badvers
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in RCODE = 16 (BADVERS)\&.
.RE
.PP
rcode\&.other
.RS 4
Number of requests received by the
\fBb10\-auth\fR
server resulted in other RCODEs\&.
.RE
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.PP
Opcode of a request message will not be counted if:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The request message is too short to parse the message header
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The request message is a response (i\&.e\&. QR bit is set)
.RE
.sp
.RE
.PP
Request attributes except for opcode will not be counted if TSIG validation failed as they are not reliable\&. We always count opcode mainly for compatibility with BIND 9, but remember that if there\'s any error related to TSIG, some of the counted opcode may not be trustworthy\&.
.sp .5v
.RE
.SH "FILES"
.PP

/usr/local/var/bind10/zone\&.sqlite3
\(em Location for the SQLite3 zone database when
\fIdatabase_file\fR
configuration is not defined\&.
.SH "SEE ALSO"
.PP

\fBb10-cfgmgr\fR(8),
\fBb10-ddns\fR(8),
\fBb10-init\fR(8),
\fBb10-loadzone\fR(8),
\fBb10-msgq\fR(8),
\fBb10-stats\fR(8),
\fBb10-zonemgr\fR(8),
\fBbind10\fR(8),
BIND 10 Guide\&.
.SH "HISTORY"
.PP
The
\fBb10\-auth\fR
daemon was first coded in October 2009\&.
.SH "COPYRIGHT"
.br
Copyright \(co 2010-2012 Internet Systems Consortium, Inc. ("ISC")
.br
